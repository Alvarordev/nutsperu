---
import Layout from "../layouts/Layout.astro";
import ProductsSection from "../components/landing/ProductsSection.astro";
import PartnersSection from "../components/landing/PartnersSection.astro";
import HowWeWorkSection from "../components/landing/HowWeWorkSection.astro";
import FaqSection from "../components/landing/FaqSection.astro";
import HeroSection from "../components/landing/HeroSection.astro";
import table from "../assets/tabla-gemini.webp";
import almendraGemini from "../assets/macro-fotos/almendra-gemini.png";
import maniGemini from "../assets/macro-fotos/mani-gemini.png";
import nuezBrasilGemini from "../assets/macro-fotos/nuez-brasil-gemini.png";
import nuezNogalGemini from "../assets/macro-fotos/nuez-nogal-gemini.png";
import pistachoGemini from "../assets/macro-fotos/pistacho-gemini.png";
import AboutSection from "../components/landing/AboutSection.astro";
import FloatingWhatsApp from "../components/common/FloatingWhatsApp.astro";
import Video from "../assets/videofile.mp4";
---

<Layout title="Nuts Peru">
    <FloatingWhatsApp />

    <main class="relative w-full">
        <HeroSection
            tableImageUrl={table.src}
            macroImages={{
                almendra: almendraGemini.src,
                mani: maniGemini.src,
                nuezBrasil: nuezBrasilGemini.src,
                nuezNogal: nuezNogalGemini.src,
                pistacho: pistachoGemini.src,
            }}
        />

        <AboutSection />
        <section class="w-full">
            <video
                src={Video}
                id="video"
                class="project-video w-full max-h-150 object-cover"
                autoplay
                muted
                loop
                playsinline
                preload="auto"></video>
        </section>
        <ProductsSection />
        <PartnersSection />
        <HowWeWorkSection />
        <FaqSection />
    </main>
</Layout>

<script>
    function initVideo() {
        const video =
            document.querySelector<HTMLVideoElement>(".project-video");

        if (!video) return;

        video.playbackRate = 1.1;

        video.play().catch((error) => {
            console.log("Autoplay prevented:", error);
        });
    }

    document.addEventListener("DOMContentLoaded", initVideo);
    initVideo();
</script>
